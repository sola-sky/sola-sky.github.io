<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="学习记录和总结">
<meta property="og:type" content="website">
<meta property="og:title" content="Li's Blog">
<meta property="og:url" content="http://solasky.info/page/2/index.html">
<meta property="og:site_name" content="Li's Blog">
<meta property="og:description" content="学习记录和总结">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Li's Blog">
<meta name="twitter:description" content="学习记录和总结">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://solasky.info/page/2/"/>





  <title> Li's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Li's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://solasky.info/2016/06/07/Toolbar/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="sola_sky">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=209cc278b019ebc4c0787691b227cf79/9ec6b93eb13533fadb266e33abd3fd1f41345b3d.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Li's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Li's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/07/Toolbar/" itemprop="url">
                  Toolbar
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-07T15:39:16+08:00">
                2016-06-07
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Toolbar"><a href="#Toolbar" class="headerlink" title="Toolbar"></a>Toolbar</h3><p>Toolbar默认只显示一个标题文本，默认情况下该标题文本会使用AndroidManifest中当前Activity节点下label标签所对应的文本，如果当前Activity节点下没有label标签则查找上级节点application中的label标签文本显示，这点与ActionBar类似。<br>Toolbar继承于ViewGroup，因此可以像普通控件那样使用它。<strong>使用时必须注意Activity的theme必须设置为NoActionBar的，否则将出错。</strong><br>调用<code>setSupportActionBar()</code>将Toolbar作为ActionBar来对待，这时你需要通过onCreateOptionsMenu和onOptionsItemSelected方法来联系菜单和监听菜单事件</p>
<p><strong>上述是将Toolbar当做ActionBar来使用的情况，实际上我们也可以将其独立作为一款控件来使用，这时不需要用setSupportActionBar设置它为ActionBar就行了</strong>，这时你可以通过<code>inflateMenu()</code>方法来加载菜单文件，并通过<code>setOnMenuItemClickListener()</code>方法监听。<strong>切记如果是用了setSupportActionBar时，这两个方法无效，不会产生想要的扩展自定义的菜单和事件监听</strong>。单作为普通控件时，弹出二级菜单时，不能像ActionBar那样便捷地通过Theme来修改，但Toolbar提供了一个setPopupTheme方法和对应的popupTheme属性来设置弹出菜单的样式。</p>
<p><strong>要使用ActionMode,必须将Toolbar作为ActionBar，即设置setSupportActionBar()</strong></p>
<h4 id="ActionMode"><a href="#ActionMode" class="headerlink" title="ActionMode"></a>ActionMode</h4><p>An action mode’s lifecycle is as follows:</p>
<ul>
<li>onCreateActionMode(ActionMode, Menu) once on initial creation</li>
<li>onPrepareActionMode(ActionMode, Menu) after creation and any time the ActionMode is invalidated</li>
<li>onActionItemClicked(ActionMode, MenuItem) any time a contextual action button is clicked</li>
<li>onDestroyActionMode(ActionMode) when the action mode is closed</li>
</ul>
<h6 id="onCreateActionMode"><a href="#onCreateActionMode" class="headerlink" title="onCreateActionMode"></a>onCreateActionMode</h6><p>Called when action mode is first created. The menu supplied will be used to generate action buttons for the action mode.<br>true if the action mode should be created, false if entering this mode should be aborted.</p>
<h6 id="onDestroyActionMode"><a href="#onDestroyActionMode" class="headerlink" title="onDestroyActionMode"></a>onDestroyActionMode</h6><p>Called when an action mode is about to be exited and destroyed.</p>
<h6 id="onPrepareActionMode"><a href="#onPrepareActionMode" class="headerlink" title="onPrepareActionMode"></a>onPrepareActionMode</h6><p>Called to refresh an action mode’s action menu whenever it is invalidated.<br>true if the menu or action mode was updated, false otherwise.</p>
<h3 id="Menu"><a href="#Menu" class="headerlink" title="Menu"></a>Menu</h3><ul>
<li>actionViewClass属性可以用来指定item控件的类型</li>
<li>menu.findItem().getActionView()可以获得控件</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://solasky.info/2016/06/06/View源码学习记录一/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="sola_sky">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=209cc278b019ebc4c0787691b227cf79/9ec6b93eb13533fadb266e33abd3fd1f41345b3d.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Li's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Li's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/06/View源码学习记录一/" itemprop="url">
                  View源码学习记录一
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-06T07:16:04+08:00">
                2016-06-06
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###View类的注释文档</p>
<ul>
<li>set properties</li>
<li>set focus</li>
<li>set up listeners</li>
<li>set visibility</li>
</ul>
<p><code>onFinishInflate()</code><br>Called after a view and all of its children has been inflated from xml.</p>
<p><code>onMeasure()</code><br>Called to determine the size requirements for this view and all of its children.</p>
<p><code>onLayout()</code><br><code>onSizeChanged()</code><br><code>onDraw()</code><br><code>onKeyDown()</code><br><code>onKeyUp()</code><br><code>onTrackballEvent()</code><br><code>onTouchEvent</code><br><code>onFocusChanged</code><br><code>onWindowFocusChanged</code><br><code>onAttachedToWindow</code><br><code>onDetachedFromWindow</code><br><code>onWindowVisibilityChanged</code></p>
<p><strong>measured width 和 measured height</strong><br>These dimensions define how big a view wants to be within its parent.<br>The measured dimensions can be obtained by calling getMeasuredWidth() getMeasureHeight()</p>
<p><strong>width and height or drawing width and drawing height</strong><br>These dimensions define the acutal size of the view on screen, <strong>at drawing time and after layout</strong>.These values may,but do no have to, be different from the measured width and height.<br>(<strong>注意：width和height的获取是在layout方法之后才能获取到的，本质上是右边减左边坐标，而坐标是在layout时确定的，还有就是width可以和measured width不一样</strong>)</p>
<p>To measure its dimensions, a view takes into account its padding.(<strong>也就是说，为了测量，padding也是需要考虑进入的，也就是说计算measured width时需要加上padding</strong>)</p>
<p><em>Event though a view can define a padding, it does not provide any support for margins. However, view groups provide sucah a support.</em><br><strong>ViewGroup and ViewGroup.MarginLayoutParams</strong></p>
<p> A parent view may call measure() more than once on its children. For example, the parent may measure each child once with unspecified dimensions to find out how big they want to be, then call measure() on them again with actual numbers if the sum of all the children’s unconstrained sizes is too big or too small.</p>
<p>The measure pass uses two classes to communicate dimensions.The<br><strong>MeasureSpec</strong> lass is used by views to tell their parents how they want to be measured and positioned. The base LayoutParams class just describes how big the view wants to be for both width and height.</p>
<li>UNSPECIFIED: This is used by a parent to determine the desired dimension<br>of a child view. For example, a LinearLayout may call measure() on its child with the height set to UNSPECIFIED and a width of EXACTLY 240 to find out how tall the child view wants to be given a width of 240 pixels.<br></li><li>EXACTLY: This is used by the parent to impose an exact size on the child. The child must use this size, and guarantee that all of its descendants will fit within this size.<br></li><li>AT_MOST: This is used by the parent to impose a maximum size on the child. The child must guarantee that it and all of its descendants will fit within this size.<br><br></li><li><strong>requestLayout</strong>: 典型的用法是当view确信当前的边界不再适合它时，可以调用这个方法重新布局。</li>

<p>If you set a background drawable for a View, then the View will draw it before calling back to its <code>onDraw()</code> method. The child drawing order can be overridden with ViewGroup#setChildrenDrawingOrderEnabled(boolean) custom child drawing order in a ViewGroup, and with #setZ(float) custom Z values set on Views.<br>也就说背景图片在回调<code>onDraw()</code>之前就会被画。并且绘画的顺序可以通过<code>setChildrenDrawingOrderEnabled()</code>自定义子view的顺序，通过设置z坐标。</p>
<p><strong> To force a view to draw, call invalidate()</strong></p>
<p><strong>边界改变用requestLayout,可见性改变用invalidate()</strong></p>
<p>**注意：整个视图树是单线程，所以当你调用任何方法和view时都必须在UI线程。<br>If you are doing work on other threads and want to update the state of a view from that thread, you should use a Handler.</p>
<p>focus是用来处理用户输入的<br>When in touch mode (see notes below) views indicate whether they still would like focus via {@link #isFocusableInTouchMode} and can change this via {@link #setFocusableInTouchMode(boolean)}.<br>也就是说用来判断在触摸时，该view是否会持有焦点。<br><code>isFocusable()</code>是用来判断该view是否有获取焦点的能力<br><code>setFocusable()</code>赋予该view拥有获取焦点的能力<br><code>requestFocus()</code>让该view获取到焦点</p>
<p>For a touch capable device, once the user touches the screen, the device will enter touch mode.  From this point onward, only views for which {@link #isFocusableInTouchMode} is true will be focusable, such as text editing widgets. Other views that are touchable, like buttons, will not take focus when touched; they will only fire the on click listeners.<br>Any time a user hits a directional key, such as a D-pad direction, the view device will exit touch mode, and find a view to take focus, so that the user may resume interacting with the user interface without touching the screen again.<br>这段话的意思是说当设备进入触摸模式时，只有那些在触摸模式下有能力获得focus的控件才能获得focus，比如TextView。但是像Button默认就是不会获得焦点了在触摸时。<br>可用<code>isInTouchMode()</code>来查看当前是否处于触摸模式</p>
<h3 id="View源码"><a href="#View源码" class="headerlink" title="View源码"></a>View源码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@IntDef</span>(&#123;VISIBLE, INVISIBLE, GONE&#125;)</div><div class="line"><span class="meta">@Retention</span>(RetentionPolicy.SOURCE)</div><div class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Visibility &#123;&#125;</div></pre></td></tr></table></figure>
<p><img src="http://thumbnail0.baidupcs.com/thumbnail/1d14172118811b1a6de058025448980c?fid=2350953866-250528-639134407184938&amp;time=1465614000&amp;rt=sh&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-MKdEjJJIByrk01WugcLIDB%2BgPqY%3D&amp;expires=8h&amp;chkv=0&amp;chkbd=0&amp;chkpc=&amp;dp-logid=3768716526557097506&amp;dp-callid=0&amp;size=c710_u400&amp;quality=100" alt="setVisibility"></p>
<p>因为<code>public void setVisibility(@Visibility int visibility)</code>的参数被@Visibility标记了，所以只能用@IntDef里声明的那些变量来对参数进行赋值，不然会提示错误。这么做是用来代替枚举型，因为Enum通常需要两倍以上的存储空间。而在常量定义了之后，事实上我们已经可以使之作为对Enum的替代了，但是在实际的开发过程中写的代码如果换成了其他的变量名，编译器并不能够报错。所以就用了<strong>@IntDef @Retention @interface</strong>这种办法。</p>
<ul>
<li>RetentionPolicy.SOURCE —— 这种类型的Annotations只在源代码级别保留,编译时就会被忽略</li>
<li>RetentionPolicy.CLASS —— 这种类型的Annotations编译时被保留,在class文件中存在,但JVM将会忽略</li>
<li>RetentionPolicy.RUNTIME —— 这种类型的Annotations将被JVM保留,所以他们能在运行时被JVM或其他使</li>
</ul>
<h3 id="StateSet"><a href="#StateSet" class="headerlink" title="StateSet"></a>StateSet</h3><p>State sets are arrays of positive ints where each element represents the state of a {@link android.view.View} (e.g. focused, selected, visible, etc.).  A {@link android.view.View} may be in one or more of those states.</p>
<p>每个元素代表View的状态，比如focused，selected，visible等。</p>
<p>A state spec is an array of signed ints where each element represents a required (if positive) or an undesired (if negative) {@link android.view.View} state.<br>元素为正代表需要，为负代表没有需要。</p>
<p><code>private static final int[][] VIEW_STATE_SETS;</code>在相应的行存放不同状态（状态可以组合）的引用，比如WINDOW_FOCUSED是在index为1（坐标从0开始）的那行，及第二行了。比如3为WINDOW_FOCUSED和SELECTED的组合，一维数组的长度就是2了，分别就存放这两个状态对应的drawable的Int值了（R），至于第一是存放WINDOW_FOCUSED还是第二个存放它，就得看<code>R.styleable.ViewDrawableStates[]</code>数组中这两个状态是先后顺序了。</p>
<p><strong>View中的SYSTEM_UI<em>FLAG</em> 这些属性标签对于控制屏幕显示挺重要的</strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://solasky.info/2016/05/31/android-studio-instant-run/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="sola_sky">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=209cc278b019ebc4c0787691b227cf79/9ec6b93eb13533fadb266e33abd3fd1f41345b3d.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Li's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Li's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/31/android-studio-instant-run/" itemprop="url">
                  android studio instant run
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-31T07:45:23+08:00">
                2016-05-31
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###记录有关Instant Run的学习<br><a href="http://mp.weixin.qq.com/s?__biz=MzA5MzI3NjE2MA==&amp;mid=2650236001&amp;idx=1&amp;sn=f2ac9a45ebe0d59fa11d9599ad7cca50&amp;scene=4#wechat_redirect" target="_blank" rel="external">郭霖的原文——《你真的了解Instant Run吗？》</a></p>
<p>Instant Run主要分为三种类型，hot swap、warm swap和cold swap，Android Studio会根据代码的修改情况自动选择使用哪种swap类型。</p>
<ul>
<li><strong>Hot Swap</strong></li>
</ul>
<p>hot swap的适用条件比较少，只有一种情况会被Android Studio视为hot swap类型，就是<strong>修改一个现有方法中的代码</strong> **</p>
<ul>
<li><strong>Warm Swap</strong></li>
</ul>
<p>warm swap的适用条件也比较局限，只有一种情况会被Android Studio视为warm swap类型，就是<strong>修改或删除一个现有的资源文件</strong></p>
<ul>
<li><strong>Cold Swap</strong></li>
</ul>
<p>cold swap相对而言就要更慢一些了，Android Studio会自动记录我们项目的每次修改，然后将修改的这部分内容打成一个dex文件发送到手机上，尽管这种swap类型仍然不需要去安装一个全新的APK，但是为了加载这个新的dex文件，整个应用程序必须进行重启才行。另外，cold swap的工作原理是基于multidex机制来实现的，在不引入外部library的情况下，只有5.0及以上的设备才支持multidex，因此，如果你使用了5.0以下的设备，那么cold swap就无法工作了，这种情况会执行最原始的完整APK安装过程。<br>cold swap的适用条件非常多。</p>
<ul>
<li>添加、删除或修改一个注解</li>
<li>添加、删除或修改一个字段</li>
<li>添加、删除或修改一个方法</li>
<li>添加一个类</li>
<li>修改一个类的继承结构</li>
<li>修改一个类的接口实现</li>
<li>修改一个类的static修饰符</li>
<li>涉及资源文件id的改动</li>
</ul>
<ul>
<li><strong>Full APK</strong></li>
</ul>
<p>除了满足以上条件的其他程序变更，Instant Run目前都还不支持，主要包括以下一些情况：</p>
<ul>
<li>改变AndroidManifest.xml文件的内容</li>
<li>改变被AndroidManifest.xml文件所引用的资源，比如string.xml中的app_name</li>
<li>改变桌面widget的UI相关元素</li>
</ul>
<p>当程序不被Instant Run所支持时，就会执行完整APK安装过程，同时Android Studio会给出这样的提示：<br><strong>Performing full build &amp; install</strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://solasky.info/2016/05/30/2016-05-30总结/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="sola_sky">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=209cc278b019ebc4c0787691b227cf79/9ec6b93eb13533fadb266e33abd3fd1f41345b3d.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Li's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Li's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/30/2016-05-30总结/" itemprop="url">
                  2016-05-30总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-30T19:02:36+08:00">
                2016-05-30
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>android的view获取坐标时要考虑其参考系，想清楚某个方法得到的坐标的参考系是其parent view左上角还是屏幕左上角。</li>
<li>android studio显示shape有关圆角显示不正常，比如只设置了左上角为圆角，但是android studio里显示的却是四个都圆角了，所以相信自己设置的属性，不要相信android studio显示出来的效果这时</li>
<li>直接给button的background设置shape的圆角边框，不要在其parent view的background设置shape，不然的话button的background会覆盖parent view的shape，这样就达不圆角的效果了</li>
<li>今天网络请求在使用RxJava+Retrofit时，不知为何用subscribe()不带参的方法时运行会出错，带上Subscriber的参数就没问题了。还有自定义一个异常来统一抛出请求返回出错的问题，当数据不正常时，直接抛出此异常，用一个自定义的Subscriber来统一处理异常。</li>
<li>gridview指定stretchMode为none时，columnWidth也必须指定，否则gridview显示不出来东西</li>
<li>showContextMenu()方法弹出上下文菜单。</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://solasky.info/2016/05/29/手势事件被重叠的下层消费解决思路/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="sola_sky">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=209cc278b019ebc4c0787691b227cf79/9ec6b93eb13533fadb266e33abd3fd1f41345b3d.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Li's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Li's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/29/手势事件被重叠的下层消费解决思路/" itemprop="url">
                  手势事件被重叠的下层消费解决思路
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-29T17:56:07+08:00">
                2016-05-29
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在仿造网易云音乐app的底部弹出框效果，实际开发中遇到了一个问题，就是当手势事件按在上层时（本文中说的上层和下层是同级关系的ViewGroup，例如DrawLayout中的两个子布局），由于上层的子view和其本身ViewGroup都没有消费事件，所以touchEvent被传到下层进行消费了（由于上层从底部弹出来覆盖在了下层之上，所以区域重叠了）。<br>但是我想要的顺序不是这样的，我想要是事件没有被上层消费时，直接让其parent View消费，而不是传给下层。一开始以为DrawLayout有实现，然后傻傻的看源码，最后通过实践写了一个DrawLayout的activity，发现也一样，事件也是被下层消费了。<br>然后现在想了一个办法，拖拽事件我只想让TextView被按下时才触发，TextView下面的ListView按照其原来的方式消费touchEvent。所以在最顶层ViewGroup（类似DrawLayout）中拦截事件时进行判断，如果手指按在了TextView区域内，则拦截事件，不让其往子view传递事件，这样事件就会传到最顶层自己的onTouchEvent中了，这样就可以实现拖拽，而不是被下层view消费了。<br>还有为了阻止事件传递给下层，可以为上层添加<code>clickable=true</code>这个属性，这个属性一添加，事件如果没有被其子View消费，那么就会被自己消费，虽然啥都没写，但是其onTouchEvent会返回true，这样就可以阻止事件继续传递，于是就不会传给下层了，但同时也不会传给其parent View也就是自定义的那个底部弹出框布局。但是前面我们已经为按到TextView时的事件进行拦截，所以自定义底部弹出框依然是可以拖拽的，只要你按到了TextView，其他区域不需要拖拽，其他区域只要正常消费事件就行了，因为其他区域就只有一个可以上下拉进行数据加载的Listview。<br><strong>补充一下，ViewDragHelper里的getViewHorizontalDragRange()必须返回0，否则在进行滑动时，自定义底部弹出框会阻止事件往子View传递，于是上下拉加载数据操作就无法实现了</strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://solasky.info/2016/05/29/如何搜索/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="sola_sky">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=209cc278b019ebc4c0787691b227cf79/9ec6b93eb13533fadb266e33abd3fd1f41345b3d.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Li's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Li's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/29/如何搜索/" itemprop="url">
                  如何搜索
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-29T17:46:47+08:00">
                2016-05-29
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p><strong>双引号</strong><br>把搜索词放在双引号中，代表完全匹配搜索，也就是说搜索结果返回的页面包含双引号中出现的所有的词，连顺序也必须完全匹配。bd和Google 都支持这个指令。例如搜索： “seo方法图片”</p>
</li>
<li><p><strong>减号</strong><br>减号代表搜索不包含减号后面的词的页面。使用这个指令时减号前面必须是空格，减号后面没有空格，紧跟着需要排除的词。Google 和bd都支持这个指令。<br>例如：搜索 -引擎<br>返回的则是包含“搜索”这个词，却不包含“引擎”这个词的结果。</p>
</li>
<li><p><strong>星号</strong><br>星号<em>是常用的通配符，也可以用在搜索中。百度不支持</em>号搜索指令。<br>比如在Google 中搜索：搜索<em>擎<br>其中的</em>号代表任何文字。返回的结果就不仅包含“搜索引擎”，还包含了“搜索收擎”，“搜索巨擎”等内容。</p>
</li>
<li><p><strong>inurl</strong><br>inurl: 指令用于搜索查询词出现在url 中的页面。bd和Google 都支持inurl 指令。inurl 指令支持中文和英文。<br>比如搜索：inurl:搜索引擎优化<br>返回的结果都是网址url 中包含“搜索引擎优化”的页面。由于关键词出现在url 中对排名有一定影响，使用inurl:搜索可以更准确地找到竞争对手。</p>
</li>
<li><p><strong>inanchor</strong><br>inanchor:指令返回的结果是导入链接锚文字中包含搜索词的页面。百度不支持inanchor。<br>比如在Google 搜索 ：inanchor:点击这里<br>返回的结果页面本身并不一定包含“点击这里”这四个字，而是指向这些页面的链接锚文字中出现了“点击这里”这四个字。<br>可以用来找到某个关键词的竞争对收，而且这些竞争对手往往是做过SEO 的。研究竞争对手页面有哪些外部链接，就可以找到很多链接资源。</p>
</li>
<li><p><strong>intitle</strong><br>intitle: 指令返回的是页面title 中包含关键词的页面。Google 和bd都支持intitle 指令。<br>使用intitle 指令找到的文件是更准确的竞争页面。如果关键词只出现在页面可见文字中，而没有出现在title 中，大部分情况是并没有针对关键词进行优化，所以也不是有力的竞争对手。</p>
</li>
<li><p><strong>allintitle</strong><br>allintitle:搜索返回的是页面标题中包含多组关键词的文件。<br>例如 ：allintitle:SEO 搜索引擎优化<br>就相当于：intitle:SEO intitle:搜索引擎优化<br>返回的是标题中中既包含“SEO”，也包含“搜索引擎优化”的页面</p>
</li>
<li><p><strong>allinurl</strong><br>与allintitle: 类似。<br>allinurl:SEO 搜索引擎优化<br>就相当于 ：inurl:SEO inurl:搜索引擎优化</p>
</li>
<li><p><strong>filetype</strong><br>用于搜索特定文件格式。Google 和bd都支持filetype 指令。<br>比如搜索filetype:pdf SEO<br>返回的就是包含SEO 这个关键词的所有pdf 文件。</p>
</li>
<li><p><strong>site</strong><br>site:是SEO 最熟悉的高级搜索指令，用来搜索某个域名下的所有文件。</p>
</li>
<li><p><strong>related</strong><br>related:指令只适用于Google，返回的结果是与某个网站有关联的页面。比如搜索<br>related:<a href="http://cnseotool.com" target="_blank" rel="external">http://cnseotool.com</a><br>我们就可以得到Google 所认为的与点石网站有关联的其他页面。 这种关联到底指的是什么，Google 并没有明确说明，一般认为指的是有共同外部链接的网站。</p>
</li>
<li><p><strong>~</strong><br>同时搜索近义词，比如“higher education”和“university”</p>
</li>
<li><p><strong>..</strong><br>显示指定时间段内的搜素结果</p>
</li>
<li><p><strong>author</strong><br>搜素某个作者</p>
</li>
<li><p><strong>define</strong><br>了解字词定义</p>
</li>
<li><p><strong>+,-,*,/</strong><br>快速进行数学计算</p>
</li>
<li><p><strong>=?</strong><br>单位换算，比如54磅=? 公斤</p>
</li>
<li><p><strong>Ctrl+L</strong><br>快速选中浏览器地址栏</p>
</li>
<li><p><strong>info</strong><br>来显示与某链接相关的一系列搜寻，提供cache 、link 、related 和完全包含该链接的网页的功能。</p>
</li>
<li><p><strong>大写OR</strong><br>表示逻辑或</p>
</li>
</ul>
<p><strong>记住搜索前自己做好分词工作，搜索引擎干的最基本的事情其实就是分词匹配，所以不要加入一些无用的关键字，不要用句子，不要用日常用语，使用最简单的关键字，结合上述语法</strong></p>
<p><a href="https://www.zhihu.com/question/20161362" target="_blank" rel="external"><strong>知识点来自知乎</strong></a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://solasky.info/2016/05/25/单例模式之DCL/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="sola_sky">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=209cc278b019ebc4c0787691b227cf79/9ec6b93eb13533fadb266e33abd3fd1f41345b3d.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Li's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Li's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/25/单例模式之DCL/" itemprop="url">
                  单例模式之DCL
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-25T20:31:12+08:00">
                2016-05-25
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h3><p>1.给SingletonExample的实例分配内存。</p>
<p>2.初始化SingletonExample的构造器</p>
<p>3.将instance对象指向分配的内存空间（注意到这步instance就非null了）。</p>
<p>但是，由于Java编译器允许处理器乱序执行（out-of-order），以及JDK1.5之前JMM（Java Memory Medel）中Cache、寄存器到主内存回写顺序的规定，上面的第二点和第三点的顺序是无法保证的，也就是说，执行顺序可能是1-2-3也可能是1-3-2，如果是后者，并且在3执行完毕、2未执行之前，被切换到线程二上，这时候instance因为已经在线程一内执行过了第三点，instance已经是非空了，所以线程二直接拿走instance，然后使用，然后顺理成章地报错，而且这种难以跟踪难以重现的错误估计调试上一星期都未必能找得出来，真是一茶几的杯具啊。</p>
<h4 id="来源"><a href="#来源" class="headerlink" title="来源"></a>来源</h4><ol>
<li><a href="http://http://www.cnblogs.com/techyc/p/3529983.html" target="_blank" rel="external">浅谈设计模式</a></li>
<li><a href="http://http://www.race604.com/java-double-checked-singleton" target="_blank" rel="external">Java 单例真的写对了么?</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://solasky.info/2016/05/25/判断android处于前台还是后台/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="sola_sky">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=209cc278b019ebc4c0787691b227cf79/9ec6b93eb13533fadb266e33abd3fd1f41345b3d.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Li's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Li's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/25/判断android处于前台还是后台/" itemprop="url">
                  判断android处于前台还是后台
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-25T19:56:35+08:00">
                2016-05-25
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="方法一-通过RunningTask"><a href="#方法一-通过RunningTask" class="headerlink" title="方法一 通过RunningTask"></a>方法一 通过RunningTask</h3><h6 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h6><p>当一个App处于前台的时候，会处于RunningTask的这个栈的栈顶，所以我们可以取出RunningTask的栈顶的任务进程，看他与我们的想要判断的App的包名是否相同，来达到效果。</p>
<h6 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h6><p>getRunningTask方法在Android5.0以上已经被废弃，只会返回自己和系统的一些不敏感的task，不再返回其他应用的task，用此方法来判断自身App是否处于后台，仍然是有效的，但是无法判断其他应用是否位于前台，因为不再能获取信息。</p>
<h6 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">List&lt;ActivityManager.RunningTaskInfo&gt; taskInfo = am.getRunningTasks(<span class="number">1</span>);</div><div class="line">           ComponentName componentInfo = taskInfo.get(<span class="number">0</span>).topActivity;</div><div class="line">           <span class="keyword">if</span> (componentInfo.getPackageName().equals(context.getPackageName())) &#123;</div><div class="line">               isInBackground = <span class="keyword">false</span>;</div><div class="line">           &#125;</div></pre></td></tr></table></figure>
<h3 id="方法二-通过RunningProcess"><a href="#方法二-通过RunningProcess" class="headerlink" title="方法二 通过RunningProcess"></a>方法二 通过RunningProcess</h3><h6 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h6><p>通过runningProcess获取到一个当前正在运行的进程的List，我们遍历这个List中的每一个进程，判断这个进程的一个importance 属性是否是前台进程，并且包名是否与我们判断的APP的包名一样，如果这两个条件都符合，那么这个App就处于前台</p>
<h6 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h6><p>在聊天类型的App中，常常需要常驻后台来不间断的获取服务器的消息，这就需要我们把Service设置成START_STICKY，kill 后会被重启（等待5秒左右）来保证Service常驻后台。如果Service设置了这个属性，这个App的进程就会被判断是前台，代码上的表现就是appProcess.importance的值永远是 ActivityManager.RunningAppProcessInfo.IMPORTANCE_FOREGROUND，这样就永远无法判断出到底哪个是前台了。</p>
<h6 id="用法-1"><a href="#用法-1" class="headerlink" title="用法"></a>用法</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">List&lt;ActivityManager.RunningAppProcessInfo&gt; runningProcesses = am.getRunningAppProcesses();</div><div class="line">           <span class="keyword">for</span> (ActivityManager.RunningAppProcessInfo processInfo : runningProcesses) &#123;</div><div class="line">               <span class="keyword">if</span> (processInfo.importance == ActivityManager.RunningAppProcessInfo.IMPORTANCE_FOREGROUND) &#123;</div><div class="line">                   <span class="keyword">for</span> (String activeProcess : processInfo.pkgList) &#123;</div><div class="line">                       <span class="keyword">if</span> (activeProcess.equals(context.getPackageName())) &#123;</div><div class="line">                           isInBackground = <span class="keyword">false</span>;</div><div class="line">                       &#125;</div><div class="line">                   &#125;</div><div class="line">               &#125;</div><div class="line">           &#125;</div></pre></td></tr></table></figure>
<h3 id="方法三-通过ActivityLifecycleCallbacks"><a href="#方法三-通过ActivityLifecycleCallbacks" class="headerlink" title="方法三 通过ActivityLifecycleCallbacks"></a>方法三 通过ActivityLifecycleCallbacks</h3><h6 id="原理-2"><a href="#原理-2" class="headerlink" title="原理"></a>原理</h6><p>AndroidSDK14在Application类里增加了ActivityLifecycleCallbacks，我们可以通过这个Callback拿到App所有Activity的生命周期回调。<br>可能还有人在纠结，我用back键切到后台和用Home键切到后台，一样吗？以上方法适用吗？在Android应用开发中一般认为back键是可以捕获的，而Home键是不能捕获的（除非修改framework）,但是上述方法从Activity生命周期着手解决问题，虽然这两种方式的Activity生命周期并不相同，但是二者都会执行onStop（）；所以并不关心到底是触发了哪个键切入后台的。另外,Application是否被销毁,都不会影响判断的正确性</p>
<h6 id="用法-2"><a href="#用法-2" class="headerlink" title="用法"></a>用法</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> <span class="keyword">extends</span> <span class="title">Application</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span></span>&#123;</div><div class="line">        Foreground.init(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ActivityLifecycleCallbacks</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onActivityCreated</span><span class="params">(Activity activity, Bundle savedInstanceState)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onActivityStarted</span><span class="params">(Activity activity)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onActivityResumed</span><span class="params">(Activity activity)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onActivityPaused</span><span class="params">(Activity activity)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onActivityStopped</span><span class="params">(Activity activity)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onActivitySaveInstanceState</span><span class="params">(Activity activity, Bundle outState)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onActivityDestroyed</span><span class="params">(Activity activity)</span></span>;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="方法四-通过使用UsageStatsManager获取"><a href="#方法四-通过使用UsageStatsManager获取" class="headerlink" title="方法四 通过使用UsageStatsManager获取"></a>方法四 通过使用UsageStatsManager获取</h3><p>####### 原理</p>
<p>通过使用UsageStatsManager获取，此方法是Android5.0之后提供的新API，可以获取一个时间段内的应用统计信息，但是必须满足一下要求</p>
<ul>
<li>此方法只在android5.0以上有效</li>
<li>AndroidManifest中加入此权限 &lt;uses-permission xmlns:tools=”<a href="http://schemas.android.com/tools" target="_blank" rel="external">http://schemas.android.com/tools</a>“ android:name=”android.permission.PACKAGE_USAGE_STATS” tools:ignore=”ProtectedPermissions” /&gt;</li>
</ul>
<h3 id="方法五-通过Android自带的无障碍功能"><a href="#方法五-通过Android自带的无障碍功能" class="headerlink" title="方法五 通过Android自带的无障碍功能"></a>方法五 通过Android自带的无障碍功能</h3><h6 id="原理-3"><a href="#原理-3" class="headerlink" title="原理"></a>原理</h6><p>Android 辅助功能(AccessibilityService) 为我们提供了一系列的事件回调，帮助我们指示一些用户界面的状态变化。 我们可以派生辅助功能类，进而对不同的 AccessibilityEvent 进行处理。 同样的，这个服务就可以用来判断当前的前台应用。</p>
<h6 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h6><ol>
<li>AccessibilityService 有非常广泛的 ROM 覆盖，特别是非国产手机，从 Android API Level 8(Android 2.2) 到 Android Api Level 23(Android 6.0)。</li>
<li>AccessibilityService 不再需要轮询的判断当前的应用是不是在前台，系统会在窗口状态发生变化的时候主动回调，耗时和资源消耗都极小。</li>
<li>不需要权限请求。</li>
<li>它是一个稳定的方法，与 “方法6”读取 /proc 目录不同，它并非利用 Android 一些设计上的漏洞，可以长期使用的可能很大。</li>
<li>可以用来判断任意应用甚至 Activity, PopupWindow, Dialog 对象是否处于前台。</li>
</ol>
<h6 id="劣势"><a href="#劣势" class="headerlink" title="劣势"></a>劣势</h6><ol>
<li>需要要用户开启辅助功能。</li>
<li>辅助功能会伴随应用被“强行停止”而剥夺。</li>
</ol>
<h3 id="方法六-读取Linux系统内核保存在-proc目录下的process进程信息"><a href="#方法六-读取Linux系统内核保存在-proc目录下的process进程信息" class="headerlink" title="方法六 读取Linux系统内核保存在/proc目录下的process进程信息"></a>方法六 读取Linux系统内核保存在/proc目录下的process进程信息</h3><h6 id="原理-4"><a href="#原理-4" class="headerlink" title="原理"></a>原理</h6><p>无意中看到乌云上有人提的一个漏洞，Linux系统内核会把process进程信息保存在/proc目录下，Shell命令去获取的他，再根据进程的属性判断是否为前台。</p>
<h6 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h6><ol>
<li>不需要任何权限。</li>
<li>可以判断任意一个应用是否在前台，而不局限在自身应用。</li>
</ol>
<h6 id="缺点-2"><a href="#缺点-2" class="headerlink" title="缺点"></a>缺点</h6><ol>
<li>当/proc下文件夹过多时,此方法是耗时操作</li>
</ol>
<h6 id="用法-3"><a href="#用法-3" class="headerlink" title="用法"></a>用法</h6><p>获取一系列正在运行的App的进程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">List&lt;AndroidAppProcess&gt; processes = ProcessManager.getRunningAppProcesses();</div></pre></td></tr></table></figure>
<p>获取任一正在运行的App进程的详细信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">AndroidAppProcess process = processes.get(location);</div><div class="line">String processName = process.name;</div><div class="line"></div><div class="line">Stat stat = process.stat();</div><div class="line"><span class="keyword">int</span> pid = stat.getPid();</div><div class="line"><span class="keyword">int</span> parentProcessId = stat.ppid();</div><div class="line"><span class="keyword">long</span> startTime = stat.stime();</div><div class="line"><span class="keyword">int</span> policy = stat.policy();</div><div class="line"><span class="keyword">char</span> state = stat.state();</div><div class="line"></div><div class="line">Statm statm = process.statm();</div><div class="line"><span class="keyword">long</span> totalSizeOfProcess = statm.getSize();</div><div class="line"><span class="keyword">long</span> residentSetSize = statm.getResidentSetSize();</div><div class="line"></div><div class="line">PackageInfo packageInfo = process.getPackageInfo(context, <span class="number">0</span>);</div><div class="line">String appName = packageInfo.applicationInfo.loadLabel(pm).toString();</div></pre></td></tr></table></figure>
<p>判断是否在前台</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (ProcessManager.isMyProcessInTheForeground()) &#123;</div><div class="line">  <span class="comment">// do stuff</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>获取一系列正在运行的App进程的详细信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">List&lt;ActivityManager.RunningAppProcessInfo&gt; processes = ProcessManager.getRunningAppProcessInfo(ctx);</div></pre></td></tr></table></figure>
<h4 id="来源"><a href="#来源" class="headerlink" title="来源"></a>来源</h4><ul>
<li><a href="https://github.com/wenmingvs/AndroidProcess" target="_blank" rel="external">wenmingvs/AndroidProcess</a></li>
<li><a href="http://http://steveliles.github.io/is_my_android_app_currently_foreground_or_background.html" target="_blank" rel="external">Is my Android app currently foreground or background</a></li>
<li><a href="http://tips.androidhive.info/2015/04/android-how-to-check-if-the-app-is-in-background-or-foreground/" target="_blank" rel="external">Android How to Check if the App is in Background or Foreground</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://solasky.info/2016/05/25/include标签/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="sola_sky">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=209cc278b019ebc4c0787691b227cf79/9ec6b93eb13533fadb266e33abd3fd1f41345b3d.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Li's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Li's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/25/include标签/" itemprop="url">
                  include标签
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-25T09:52:05+08:00">
                2016-05-25
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="include标签"><a href="#include标签" class="headerlink" title="include标签"></a>include标签</h1><p>在&lt;include&gt;标签当中，我们是可以覆写所有layout属性的，即include中指定的layout属性将会覆盖掉layout=”@layout/…”xml中指定的layout属性。<br>如果我们想要在&lt;include&gt;标签当中覆写layout属性，必须要将layout_width和layout_height这两个属性也进行覆写，否则覆写效果将不会生效。<br>还有就是当给include加id时，会覆写其引入的xml布局中的id，如果布局直接是一个控件，则该控件的id就变成了include设置的id，直接通过<code>findViewById()</code>传入include的id就能找到该控件。如果布局是一个ViewGroup，则该id就变变成了include设置的id，想找其下的子view时得通过<code>findViewById(include的id).findViewById(子控件的id)</code>这种方法找到子控件。<br>查了android官网上面有一句<strong>Overrides the ID given to the root view in the included layout.</strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://solasky.info/2016/05/23/Toolbar-控件状态顺序-弹出上下文菜单/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="sola_sky">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://imgsrc.baidu.com/forum/w%3D580/sign=209cc278b019ebc4c0787691b227cf79/9ec6b93eb13533fadb266e33abd3fd1f41345b3d.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Li's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Li's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/23/Toolbar-控件状态顺序-弹出上下文菜单/" itemprop="url">
                  Toolbar 控件状态顺序 弹出上下文菜单
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-23T18:59:40+08:00">
                2016-05-23
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##Toolbar</p>
<p>运用到Toolbar的时候，主题必须是NoActionBar的。</p>
<p>##selector 控件状态顺序</p>
<p>selector中的顺序很重要，当状态都满足时，会选择顺序在前面的进行显示，比如<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/bottomnavbar_rewind_sel"</span> <span class="attr">android:state_pressed</span>=<span class="string">"true"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/bottomnavbar_rewind_sel"</span> <span class="attr">android:state_enabled</span>=<span class="string">"false"</span> /&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>当状态同时满足<code>state_pressed=&quot;true&quot;</code>和<code>state_enabled=&quot;false&quot;</code>时，显示顺序在前面的设置，这里<code>state_pressed=&quot;true&quot;</code>在前面，所以显示其设置。反之若<code>state_enable=&quot;false&quot;</code>在前面，则显示其设置。</strong></p>
<h2 id="上下文菜单"><a href="#上下文菜单" class="headerlink" title="上下文菜单"></a>上下文菜单</h2><p>当给listview设置弹出菜单时，这时要求listview里item项里的子控件不能设置onClickListenter或者设置可以点击等属性，不然会弹不出菜单。但是非要设置可点击，监听时，这时需要给该子控件也加设置上下文菜单（<code>setOnCreateContextMenuListener()</code>），里面什么都不需要写，交给listview设置上下文菜单时的监听处理就行了。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://imgsrc.baidu.com/forum/w%3D580/sign=209cc278b019ebc4c0787691b227cf79/9ec6b93eb13533fadb266e33abd3fd1f41345b3d.jpg"
               alt="sola_sky" />
          <p class="site-author-name" itemprop="name">sola_sky</p>
          <p class="site-description motion-element" itemprop="description">学习记录和总结</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  Sat May 21 2016 08:00:00 GMT+0800 (中国标准时间) - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sola_sky</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  

  




  
  

  

  

  

  


</body>
</html>
